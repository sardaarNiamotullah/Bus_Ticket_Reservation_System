<div
  class="relative bg-white border border-gray-200 rounded-xl p-6 md:p-8 mb-8"
>
  <form [formGroup]="searchForm" (ngSubmit)="onSearch()">
    <!-- Desktop Layout: All in one row -->
    <div class="hidden md:flex md:flex-row md:items-start gap-3 mb-5">
      <!-- From -->
      <div class="flex-1 flex flex-col">
        <label
          class="text-xs font-semibold text-gray-600 uppercase tracking-wide mb-1 block"
          >Going From</label
        >
        <input
          type="text"
          formControlName="from"
          placeholder="Enter city"
          class="w-full px-3 py-3 border border-gray-300 rounded-md focus:border-red-500 focus:ring-1 focus:ring-red-400 outline-none transition text-gray-800 font-medium"
        />
        <div class="h-4 mt-1">
          <span
            *ngIf="
              searchForm.get('from')?.invalid && searchForm.get('from')?.touched
            "
            class="text-red-500 text-xs"
            >Departure city is required</span
          >
        </div>
      </div>

      <!-- Swap Button -->
      <div class="flex justify-center items-center mt-6">
        <button
          type="button"
          (click)="swapLocations()"
          class="p-2.5 bg-gray-100 hover:bg-red-100 rounded-md transition flex items-center justify-center"
          title="Swap"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-5 w-5 text-red-500"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"
            />
          </svg>
        </button>
      </div>

      <!-- To -->
      <div class="flex-1 flex flex-col">
        <label
          class="text-xs font-semibold text-gray-600 uppercase tracking-wide mb-1 block"
          >Going To</label
        >
        <input
          type="text"
          formControlName="to"
          placeholder="Enter destination"
          class="w-full px-3 py-3 border border-gray-300 rounded-md focus:border-red-500 focus:ring-1 focus:ring-red-400 outline-none transition text-gray-800 font-medium"
        />
        <div class="h-4 mt-1">
          <span
            *ngIf="
              searchForm.get('to')?.invalid && searchForm.get('to')?.touched
            "
            class="text-red-500 text-xs"
            >Destination city is required</span
          >
        </div>
      </div>

      <!-- Journey Date -->
      <div class="flex-1 flex flex-col">
        <label
          class="text-xs font-semibold text-gray-600 uppercase tracking-wide mb-1 block"
          >Journey Date</label
        >
        <input
          type="date"
          formControlName="journeyDate"
          [min]="minDate"
          class="w-full px-3 py-3 border border-gray-300 rounded-md focus:border-red-500 focus:ring-1 focus:ring-red-400 outline-none transition text-gray-800 font-medium"
        />
        <div class="h-4 mt-1">
          <span
            *ngIf="
              searchForm.get('journeyDate')?.invalid &&
              searchForm.get('journeyDate')?.touched
            "
            class="text-red-500 text-xs"
            >Journey date is required</span
          >
        </div>
      </div>
    </div>

    <!-- Mobile Layout: From/Swap/To in one row, Date in next row -->
    <div class="md:hidden mb-5">
      <!-- Row 1: From + Swap + To -->
      <div class="flex flex-row items-start gap-3 mb-5">
        <!-- From -->
        <div class="flex-1 flex flex-col">
          <label
            class="text-xs font-semibold text-gray-600 uppercase tracking-wide mb-1 block"
            >Going From</label
          >
          <input
            type="text"
            formControlName="from"
            placeholder="Enter city"
            class="w-full px-3 py-3 border border-gray-300 rounded-md focus:border-red-500 focus:ring-1 focus:ring-red-400 outline-none transition text-gray-800 font-medium"
          />
          <div class="h-4 mt-1">
            <span
              *ngIf="
                searchForm.get('from')?.invalid &&
                searchForm.get('from')?.touched
              "
              class="text-red-500 text-xs"
              >Departure city is required</span
            >
          </div>
        </div>

        <!-- Swap Button -->
        <div class="flex justify-center items-center mt-6">
          <button
            type="button"
            (click)="swapLocations()"
            class="p-2.5 bg-gray-100 hover:bg-red-100 rounded-md transition flex items-center justify-center"
            title="Swap"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5 text-red-500"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"
              />
            </svg>
          </button>
        </div>

        <!-- To -->
        <div class="flex-1 flex flex-col">
          <label
            class="text-xs font-semibold text-gray-600 uppercase tracking-wide mb-1 block"
            >Going To</label
          >
          <input
            type="text"
            formControlName="to"
            placeholder="Enter destination"
            class="w-full px-3 py-3 border border-gray-300 rounded-md focus:border-red-500 focus:ring-1 focus:ring-red-400 outline-none transition text-gray-800 font-medium"
          />
          <div class="h-4 mt-1">
            <span
              *ngIf="
                searchForm.get('to')?.invalid && searchForm.get('to')?.touched
              "
              class="text-red-500 text-xs"
              >Destination city is required</span
            >
          </div>
        </div>
      </div>

      <!-- Row 2: Journey Date (full width) -->
      <div class="flex flex-col">
        <label
          class="text-xs font-semibold text-gray-600 uppercase tracking-wide mb-1 block"
          >Journey Date</label
        >
        <input
          type="date"
          formControlName="journeyDate"
          [min]="minDate"
          class="w-full px-3 py-3 border border-gray-300 rounded-md focus:border-red-500 focus:ring-1 focus:ring-red-400 outline-none transition text-gray-800 font-medium"
        />
        <div class="h-4 mt-1">
          <span
            *ngIf="
              searchForm.get('journeyDate')?.invalid &&
              searchForm.get('journeyDate')?.touched
            "
            class="text-red-500 text-xs"
            >Journey date is required</span
          >
        </div>
      </div>
    </div>

    <!-- Trending -->
    <div
      class="flex flex-col md:flex-row md:items-center justify-between mb-10"
    >
      <p class="text-gray-700 font-semibold mb-3 md:mb-0">Trending Searches:</p>
      <div class="flex flex-wrap gap-3">
        <button
          *ngFor="let route of trendingRoutes"
          type="button"
          (click)="onTrendingRouteClick(route)"
          class="px-4 py-2 bg-gray-100 hover:bg-red-100 text-sm font-medium text-gray-800 transition rounded-md"
        >
          {{ route.from }} â†’ {{ route.to }}
        </button>
      </div>
    </div>

    <!-- Floating Search Button -->
    <div class="absolute left-1/2 -bottom-6 transform -translate-x-1/2">
      <button
        type="submit"
        [disabled]="searchForm.invalid"
        class="px-10 py-3 bg-red-600 text-white font-semibold text-lg rounded-md hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-all duration-200 shadow-lg"
      >
        Search Bus
      </button>
    </div>
  </form>
</div>
